<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500&display=swap" rel="stylesheet" />
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç™»æœºç‰Œ</title>
  <!-- å†…åµŒCSSæ ·å¼ -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    :root {
      font-size: 62.5%;
    }

    body {
      font-size: 1.6rem;
      font-family: "Rubik", sans-serif;
      letter-spacing: -0.02em;
      background: linear-gradient(167.96deg, #115bb6 0%, #271a45 100%) no-repeat fixed;

      height: 100vh;
      display: grid;
      place-content: center;
    }

    .grid {
      display: grid;
    }

    .column {
      grid-auto-flow: column;
    }

    .text-right {
      text-align: right;
    }

    h1,
    strong {
      font-weight: 500;
    }

    h1 {
      font-size: 2rem;
      line-height: 1.4rem;
      color: white;
      text-align: center;
    }

    p {
      color: rgba(0, 0, 0, 0.64);
      font-size: 14px;
      line-height: 17px;
    }

    strong {
      color: rgba(0, 0, 0, 0.88);
      font-size: 16px;
      line-height: 19px;
    }

    section {
      padding: 2.4rem 3.2rem;
      background-color: white;
      border-radius: 2.4rem;

      box-shadow: 0 4rem 2.4rem rgba(0, 0, 0, 0.25);

      -webkit-mask: var(--mask);
      mask: var(--mask);
    }

    #bording-pass {
      /* max-width: 34.7rem; */
      margin-top: 4rem;
    }

    #ticket {
      margin-top: 2rem;
    }

    .top {
      gap: 2.4rem;
    }

    .departure,
    .arrival {
      width: 12.5rem;
    }

    .departure strong,
    .arrival strong {
      font-size: 40px;
      line-height: 47px;
    }

    .airplane {
      align-self: center;
    }

    .airplane img {
      object-fit: contain;
      /* ç¡®ä¿å›¾ç‰‡å†…å®¹å®Œæ•´æ˜¾ç¤º */
    }

    .airplane .square {
      width: 3.2rem;
      height: 3.2rem;
    }

    .airplane .rectangle {
      width: 6rem;
      height: 3.2rem;
    }

    .top time {
      color: rgba(0, 0, 0, 0.8);
    }

    .middle {
      border: 1px dashed rgba(0, 0, 0, 0.32);
      border-left: 0;
      border-right: 0;

      --mask: radial-gradient(1.2rem at 1.2rem 1.2rem, #0000 93%, black) -1.2rem -1.2rem;
    }

    .top time sup {
      font-weight: 500;
      font-size: 10px;
      line-height: 12px;
    }

    .bottom {
      --mask: radial-gradient(1.2rem at 1.2rem 1.2rem, #0000 93%, black) -1.2rem -1.2rem;

      -webkit-mask-repeat: repeat-x;
      mask-repeat: repeat-x;
    }

    .bottom .container {
      align-items: center;
      gap: 0.8rem;
    }

    dl .grid {
      gap: 1.6rem;
      min-width: 9.5rem;
    }

    dt time {
      color: white;
      font-weight: 500;
      font-size: 1.6rem;
      line-height: 1.9rem;
      background: #115bb6;
      border-radius: 0.8rem;
      padding: 0.4rem 0.8rem;
      display: inline-block;
      margin-top: 0.2rem;
    }

    .bottom>p {
      text-align: center;
      margin-top: 2.4rem;
      color: rgba(0, 0, 0, 0.8);
      font-size: 1.6rem;
      line-height: 2rem;
    }

    .qrcode.grid {
      justify-items: center;
    }

    #qrcode {
      padding-bottom: 10px;
      justify-items: center;
    }

    footer {
      font-size: 1.4rem;
      line-height: 2.4rem;
      color: #ffff;
      opacity: 0.64;
      width: 27rem;
      text-align: center;
      margin: 1rem auto;
    }


    /* è‡ªå®šä¹‰ç¾è§‚æ¨¡æ€æ¡† - SweetAlert2 é£æ ¼ */
    .swal2-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.4);
      z-index: 10000;
      display: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .swal2-backdrop.show {
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 1;
    }

    .swal2-popup {
      background: white;
      border-radius: 15px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
      max-width: 800px;
      width: 90%;
      max-height: 90vh;
      overflow: hidden;
      transform: scale(0.7);
      transition: transform 0.3s ease;
      font-family: "Rubik", sans-serif;
    }

    .swal2-backdrop.show .swal2-popup {
      transform: scale(1);
    }

    .swal2-header {
      padding: 30px 30px 20px;
      text-align: center;
      border-bottom: 1px solid #f0f0f0;
    }

    .swal2-title {
      color: #115bb6;
      font-size: 1.8rem;
      font-weight: 500;
      margin: 0;
    }

    .swal2-content {
      padding: 20px 30px;
      max-height: 60vh;
      overflow-y: auto;
    }

    .boarding-form {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      text-align: left;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      font-size: 0.9rem;
      font-weight: 500;
      margin-bottom: 5px;
      color: #333;
    }

    .form-group input {
      padding: 10px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 0.9rem;
      font-family: "Rubik", sans-serif;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .form-group input:focus {
      outline: none;
      border-color: #115bb6;
      box-shadow: 0 0 0 3px rgba(17, 91, 182, 0.1);
    }

    .form-group input::placeholder {
      color: #999;
    }

    .swal2-actions {
      padding: 20px 30px 30px;
      display: flex;
      gap: 15px;
      justify-content: center;
      border-top: 1px solid #f0f0f0;
    }

    .swal2-button {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      font-family: "Rubik", sans-serif;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 120px;
    }

    .swal2-confirm {
      background: linear-gradient(135deg, #115bb6, #0f4a95);
      color: white;
    }

    .swal2-confirm:hover {
      background: linear-gradient(135deg, #0f4a95, #0d3e7d);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(17, 91, 182, 0.3);
    }

    .swal2-cancel {
      background: #f8f9fa;
      color: #6c757d;
      border: 2px solid #e9ecef;
    }

    .swal2-cancel:hover {
      background: #e9ecef;
      color: #495057;
      transform: translateY(-2px);
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .boarding-form {
        grid-template-columns: 1fr;
      }
      
      .swal2-popup {
        width: 95%;
        margin: 20px;
      }
      
      .swal2-actions {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <div id="bording-pass">
    <h1>ç”µå­ç™»æœºç‰Œ</h1>
    <main id="ticket">
      <section class="top grid">
        <div class="flight grid column">
          <div class="number">
            <p>èˆªç­å· FLIGHT NO.</p>
            <strong id="flightNumber"></strong>
          </div>
          <div class="date text-right">
            <p>èˆªç­æ—¥æœŸ FLIGHT DATE</p>
            <strong id="flightDate"></strong>
          </div>
        </div>
        <div class="grid column">
          <div class="departure grid">
            <p id="departureAirportName"></p>
            <strong id="departureAirport"></strong>
            <time id="departureTime"></time>
          </div>
          <div class="airplane grid">
            <img class="rectangle" id="airlineLogo" src="img/cz.svg" />
          </div>
          <div class="arrival text-right grid">
            <p id="arrivalAirportName"></p>
            <strong id="arrivalAirport"></strong>
            <time id="arrivalTime"><sup></sup></time>
          </div>
        </div>
      </section>
      <section class="middle grid column">
        <div class="name">
          <p id="passengerMemberID"></p>
          <strong id="passengerName"></strong>
        </div>
        <div class="seat text-right">
          <p id="ticketNumber"></p>
          <strong id="passengerMember"></strong>
        </div>
      </section>
      <section class="bottom">
        <div class="container grid column">
          <dl class="grid">
            <dt>
              <p>ç™»æœºæ—¶é—´ BOD.TIME</p>
              <time id="boardingTime"></time>
            </dt>
            <dt>
              <p>èˆ±ä½ CLASS</p>
              <strong id="compartmentCode"></strong>
            </dt>
            <dt>
              <p>åº§ä½å· SEAT</p>
              <strong id="seatNumber"></strong>
            </dt>
            <dt>
              <p>ç™»æœºå£ GATE</p>
              <strong id="gate"></strong>
            </dt>
          </dl>

          <div class="qrcode grid">
            <div id="qrcode" alt="äºŒç»´ç å›¾ç‰‡"></div>
            <p>ä¹˜æœºäºŒç»´ç </p>
          </div>
        </div>
        <p>ç™»æœºåºå· BOD.NO. <strong id="checkInSequenceNumber"></strong></p>
      </section>
    </main>
    <footer>
      è¯·æ³¨æ„ç™»æœºå£ä¸´æ—¶å˜æ›´ä¿¡æ¯ï¼Œç™»æœºé—¸å£äºèµ·é£å‰20åˆ†é’Ÿå…³é—­ã€‚<br />Please note that the boarding gate may change. The boarding gate closes 20
      minutes before departure.
    </footer>
  </div>
</body>
<script src="js/bcbp.min.js"></script>
<script src="js/qrcode.min.js"></script>
<script type="text/javascript">
  // è·å–ç½‘é¡µå‚æ•°
  function getQueryVariable(variable) {
    // ä»å½“å‰é¡µé¢çš„ URL ä¸­è·å–æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå¹¶å»æ‰å¼€å¤´çš„é—®å·
    var query = window.location.search.substring(1);
    // å°†æŸ¥è¯¢å­—ç¬¦ä¸²æŒ‰ & åˆ†å‰²æˆå¤šä¸ªé”®å€¼å¯¹
    var vars = query.split("&");
    for (var i = 0; i < vars.length; i++) {
      // å°†æ¯ä¸ªé”®å€¼å¯¹æŒ‰ = åˆ†å‰²æˆé”®å’Œå€¼
      var pair = vars[i].split("=");
      if (pair[0] === variable) {
        // å¦‚æœé”®åŒ¹é…ï¼Œå¯¹å€¼è¿›è¡Œè§£ç å¹¶è¿”å›
        return pair.length > 1 ? decodeURIComponent(pair[1]) : null;
      }
    }
    return null;
  }

  //è·³è½¬åˆ°æ–°çš„ URL (ä¿ç•™ç”¨äºå…¼å®¹æ€§)
  function redirectToNewURL() {
    // è¿™ä¸ªå‡½æ•°ç°åœ¨ä¸»è¦é€šè¿‡ SweetAlert2 è°ƒç”¨
    showModal();
  }

  // ä¿ç•™ç”¨äºå…¼å®¹æ€§çš„ç©ºå‡½æ•°
  function getInputValues() {
    return {};
  }


  // è‡ªå®šä¹‰ SweetAlert2 é£æ ¼çš„æ¨¡æ€æ¡†å®ç°
  const Swal = {
    fire: function(options) {
      return new Promise((resolve) => {
        // åˆ›å»ºæ¨¡æ€æ¡† HTML
        const backdropHtml = `
          <div class="swal2-backdrop" id="swal2-backdrop">
            <div class="swal2-popup">
              <div class="swal2-header">
                <h2 class="swal2-title">${options.title || ''}</h2>
              </div>
              <div class="swal2-content">
                ${options.html || options.text || ''}
              </div>
              <div class="swal2-actions">
                ${options.showCancelButton ? `<button class="swal2-button swal2-cancel" id="swal2-cancel">${options.cancelButtonText || 'å–æ¶ˆ'}</button>` : ''}
                ${!options.timer ? `<button class="swal2-button swal2-confirm" id="swal2-confirm">${options.confirmButtonText || 'ç¡®å®š'}</button>` : ''}
              </div>
            </div>
          </div>
        `;

        // æ·»åŠ åˆ°é¡µé¢
        document.body.insertAdjacentHTML('beforeend', backdropHtml);
        const backdrop = document.getElementById('swal2-backdrop');
        const confirmBtn = document.getElementById('swal2-confirm');
        const cancelBtn = document.getElementById('swal2-cancel');

        // æ˜¾ç¤ºåŠ¨ç”»
        setTimeout(() => {
          backdrop.classList.add('show');
        }, 10);

        // å…³é—­æ¨¡æ€æ¡†å‡½æ•°
        const closeModal = (isConfirmed = false, result = null) => {
          backdrop.classList.remove('show');
          setTimeout(() => {
            backdrop.remove();
          }, 300);
          resolve({
            isConfirmed: isConfirmed,
            value: result,
            dismiss: isConfirmed ? null : 'cancel'
          });
        };

        // ç»‘å®šäº‹ä»¶
        if (confirmBtn) {
          confirmBtn.addEventListener('click', () => {
            if (options.preConfirm) {
              const result = options.preConfirm();
              closeModal(true, result);
            } else {
              closeModal(true);
            }
          });
        }

        if (cancelBtn) {
          cancelBtn.addEventListener('click', () => {
            closeModal(false);
          });
        }

        // æ³¨é‡Šæ‰ç‚¹å‡»èƒŒæ™¯å…³é—­åŠŸèƒ½ï¼Œç”¨æˆ·å¿…é¡»é€šè¿‡æŒ‰é’®æ“ä½œ
        // backdrop.addEventListener('click', (e) => {
        //   if (e.target === backdrop) {
        //     closeModal(false);
        //   }
        // });

        // ESC é”®å…³é—­
        const handleEsc = (e) => {
          if (e.key === 'Escape') {
            closeModal(false);
            document.removeEventListener('keydown', handleEsc);
          }
        };
        document.addEventListener('keydown', handleEsc);

        // å¦‚æœæœ‰å®šæ—¶å™¨ï¼Œè‡ªåŠ¨å…³é—­
        if (options.timer) {
          setTimeout(() => {
            closeModal(false);
          }, options.timer);
        }
      });
    },

    close: function() {
      const backdrop = document.getElementById('swal2-backdrop');
      if (backdrop) {
        backdrop.classList.remove('show');
        setTimeout(() => {
          backdrop.remove();
        }, 300);
      }
    },

    // æ·»åŠ å¸¸ç”¨çš„ dismiss reasons
    DismissReason: {
      cancel: 'cancel',
      backdrop: 'backdrop',
      esc: 'esc'
    }
  };

  // æ“ä½œå¼¹çª— - ä½¿ç”¨è‡ªå®šä¹‰çš„ SweetAlert2 é£æ ¼æ¨¡æ€æ¡†
  function showModal() {
    Swal.fire({
      title: 'âœˆï¸ è‡ªå®šä¹‰ç™»æœºç‰Œä¿¡æ¯',
      html: `
        <div class="boarding-form">
          <div class="form-group">
            <label for="swal-inputPassengerName">ä¹˜å®¢å§“å(*)</label>
            <input type="text" id="swal-inputPassengerName" placeholder="è¯·è¾“å…¥ä¹˜å®¢å§“å" />
          </div>
          <div class="form-group">
            <label for="swal-inputTicketNumber">ç¥¨å·</label>
            <input type="text" id="swal-inputTicketNumber" placeholder="è¯·è¾“å…¥ç¥¨å·" />
          </div>
          <div class="form-group">
            <label for="swal-inputOperatingCarrierPNR">PNR(*)</label>
            <input type="text" id="swal-inputOperatingCarrierPNR" placeholder="è¯·è¾“å…¥PNR" />
          </div>
          <div class="form-group">
            <label for="swal-inputPassengerMemberID">ä¼šå‘˜ID</label>
            <input type="text" id="swal-inputPassengerMemberID" placeholder="è¯·è¾“å…¥ä¼šå‘˜ID" />
          </div>
          <div class="form-group">
            <label for="swal-inputPassengerMember">ä¼šå‘˜ç­‰çº§</label>
            <input type="text" id="swal-inputPassengerMember" placeholder="è¯·è¾“å…¥ä¼šå‘˜ç­‰çº§" />
          </div>
          <div class="form-group">
            <label for="swal-inputOperatingCarrierDesignator">æ‰¿è¿äººä»£ç (*)</label>
            <input type="text" id="swal-inputOperatingCarrierDesignator" placeholder="å¦‚: CZ" />
          </div>
          <div class="form-group">
            <label for="swal-inputFlightNumber">èˆªç­å·(æ•°å­—)(*)</label>
            <input type="text" id="swal-inputFlightNumber" placeholder="å¦‚: 1234" />
          </div>
          <div class="form-group">
            <label for="swal-inputFlightDate">èˆªç­æ—¥æœŸ(*)</label>
            <input type="date" id="swal-inputFlightDate" />
          </div>
          <div class="form-group">
            <label for="swal-inputDepartureAirport">å‡ºå‘æœºåœºä»£ç (*)</label>
            <input type="text" id="swal-inputDepartureAirport" placeholder="å¦‚: PKX" />
          </div>
          <div class="form-group">
            <label for="swal-inputDepartureAirportName">å‡ºå‘æœºåœºåç§°</label>
            <input type="text" id="swal-inputDepartureAirportName" placeholder="å¦‚: åŒ—äº¬å¤§å…´å›½é™…æœºåœº" />
          </div>
          <div class="form-group">
            <label for="swal-inputDepartureTime">å‡ºå‘æ—¶é—´</label>
            <input type="time" id="swal-inputDepartureTime" />
          </div>
          <div class="form-group">
            <label for="swal-inputArrivalAirport">åˆ°è¾¾æœºåœºä»£ç (*)</label>
            <input type="text" id="swal-inputArrivalAirport" placeholder="å¦‚: CAN" />
          </div>
          <div class="form-group">
            <label for="swal-inputArrivalAirportName">åˆ°è¾¾æœºåœºåç§°</label>
            <input type="text" id="swal-inputArrivalAirportName" placeholder="å¦‚: å¹¿å·ç™½äº‘å›½é™…æœºåœº" />
          </div>
          <div class="form-group">
            <label for="swal-inputArrivalTime">åˆ°è¾¾æ—¶é—´</label>
            <input type="time" id="swal-inputArrivalTime" />
          </div>
          <div class="form-group">
            <label for="swal-inputArrivalDayOffset">åˆ°è¾¾æ—¥æœŸåç§»</label>
            <input type="text" id="swal-inputArrivalDayOffset" placeholder="å¦‚: +1" />
          </div>
          <div class="form-group">
            <label for="swal-inputBoardingTime">ç™»æœºæ—¶é—´</label>
            <input type="time" id="swal-inputBoardingTime" />
          </div>
          <div class="form-group">
            <label for="swal-inputCompartmentCode">èˆ±ä½ä»£ç (*)</label>
            <input type="text" id="swal-inputCompartmentCode" placeholder="å¦‚: Y" />
          </div>
          <div class="form-group">
            <label for="swal-inputSeatNumber">åº§ä½å·(*)</label>
            <input type="text" id="swal-inputSeatNumber" placeholder="å¦‚: 1A" />
          </div>
          <div class="form-group">
            <label for="swal-inputGate">ç™»æœºå£</label>
            <input type="text" id="swal-inputGate" placeholder="å¦‚: A12" />
          </div>
          <div class="form-group">
            <label for="swal-inputCheckInSequenceNumber">å€¼æœºåºå·(*)</label>
            <input type="text" id="swal-inputCheckInSequenceNumber" placeholder="å¦‚: 025" />
          </div>
        </div>
      `,
      showCancelButton: true,
      confirmButtonText: 'ğŸ« ç”Ÿæˆç™»æœºç‰Œ',
      cancelButtonText: 'ğŸ“‹ ä½¿ç”¨æ¼”ç¤ºä¿¡æ¯',
      preConfirm: () => {
        return getSwalInputValues();
      }
    }).then((result) => {
      if (result.isConfirmed) {
        // ç”¨æˆ·ç‚¹å‡»äº†ç”ŸæˆæŒ‰é’®
        const inputValues = result.value;
        const url = buildURLFromValues(inputValues);
        window.location.href = url;
      } else if (result.dismiss === 'cancel') {
        // ç”¨æˆ·ç‚¹å‡»äº†ä½¿ç”¨æ¼”ç¤ºä¿¡æ¯æŒ‰é’® - æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ä½†ä¸é‡æ–°åŠ è½½é¡µé¢
        setTimeout(() => {
          Swal.fire({
            title: 'ğŸ‰ ä½¿ç”¨æ¼”ç¤ºä¿¡æ¯',
            text: 'å·²ä¸ºæ‚¨åŠ è½½æ¼”ç¤ºæ•°æ®ï¼',
            timer: 1500
          });
        }, 350); // ç­‰å¾…å‰ä¸€ä¸ªæ¨¡æ€æ¡†å®Œå…¨å…³é—­
      }
    });
  }

  function hideModal() {
    Swal.close();
  }

  // è·å– SweetAlert2 è¾“å…¥æ¡†çš„å€¼
  function getSwalInputValues() {
    return {
      passengerName: document.getElementById('swal-inputPassengerName').value,
      ticketNumber: document.getElementById('swal-inputTicketNumber').value,
      operatingCarrierPNR: document.getElementById('swal-inputOperatingCarrierPNR').value,
      passengerMemberID: document.getElementById('swal-inputPassengerMemberID').value,
      passengerMember: document.getElementById('swal-inputPassengerMember').value,
      operatingCarrierDesignator: document.getElementById('swal-inputOperatingCarrierDesignator').value,
      flightNumber: document.getElementById('swal-inputFlightNumber').value,
      flightDate: document.getElementById('swal-inputFlightDate').value,
      departureAirport: document.getElementById('swal-inputDepartureAirport').value,
      departureAirportName: document.getElementById('swal-inputDepartureAirportName').value,
      departureTime: document.getElementById('swal-inputDepartureTime').value,
      arrivalAirport: document.getElementById('swal-inputArrivalAirport').value,
      arrivalAirportName: document.getElementById('swal-inputArrivalAirportName').value,
      arrivalTime: document.getElementById('swal-inputArrivalTime').value,
      arrivalDayOffset: document.getElementById('swal-inputArrivalDayOffset').value,
      boardingTime: document.getElementById('swal-inputBoardingTime').value,
      compartmentCode: document.getElementById('swal-inputCompartmentCode').value,
      seatNumber: document.getElementById('swal-inputSeatNumber').value,
      gate: document.getElementById('swal-inputGate').value,
      checkInSequenceNumber: document.getElementById('swal-inputCheckInSequenceNumber').value
    };
  }

  // ä»è¾“å…¥å€¼æ„å»º URL
  function buildURLFromValues(inputValues) {
    let url = window.location.href.split('?')[0];
    for (const key in inputValues) {
      if (inputValues.hasOwnProperty(key)) {
        const value = inputValues[key];
        if (value !== null && value !== undefined && value !== '') {
          url = url + (url.includes('?') ? '&' : '?') + key + '=' + encodeURIComponent(value);
        }
      }
    }
    return url;
  }

  // å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼
  function convertToUpperCase(value) {
    if (typeof value === 'string') {
      return value.toUpperCase();
    }
    return value;
  }
  // æ ‡è®°æ˜¯å¦å·²ç»æ˜¾ç¤ºè¿‡æ¨¡æ€æ¡†
  var hasShownModal = false;
  
  function showModalOnce() {
    if (!hasShownModal) {
      hasShownModal = true;
      showModal();
    }
    return "HELLO/WORLD";
  }

  var passengerName = getQueryVariable("passengerName") ? convertToUpperCase(getQueryVariable("passengerName")) : showModalOnce(); // ä¹˜å®¢å§“å
  var passengerMember = convertToUpperCase(getQueryVariable("passengerMember")) || "CZ ELITE PLUS"; // ä¹˜å®¢ä¼šå‘˜
  var passengerMemberID = convertToUpperCase(getQueryVariable("passengerMemberID")) || "CZ 0000000000/G"; // ä¹˜å®¢ä¼šå‘˜ID
  var ticketNumber = getQueryVariable("ticketNumber") || "7840000000000"; // æœºç¥¨å·
  var boardingTime = getQueryVariable("boardingTime") || "10:20"; // ç™»æœºæ—¶é—´
  var gate = getQueryVariable("gate") || "A12"; // ç™»æœºå£
  var operatingCarrierPNR = convertToUpperCase(getQueryVariable("operatingCarrierPNR")) || "ABCDEF"; // æ‰¿è¿äººPNR
  var departureAirport = convertToUpperCase(getQueryVariable("departureAirport")) || "PKX"; // å‡ºå‘æœºåœº
  var departureTime = getQueryVariable("departureTime") || "11:00"; // å‡ºå‘æ—¶é—´
  var departureAirportName = getQueryVariable("departureAirportName") || "åŒ—äº¬å¤§å…´å›½é™…æœºåœº"; // å‡ºå‘æœºåœºåç§°
  var arrivalAirport = convertToUpperCase(getQueryVariable("arrivalAirport")) || "CAN"; // åˆ°è¾¾æœºåœº
  var arrivalAirportName = getQueryVariable("arrivalAirportName") || "å¹¿å·ç™½äº‘å›½é™…æœºåœº"; // åˆ°è¾¾æœºåœºåç§°
  var arrivalTime = getQueryVariable("arrivalTime") || "13:00"; // åˆ°è¾¾æ—¶é—´
  var arrivalDayOffset = getQueryVariable("arrivalDayOffset"); // åˆ°è¾¾æ—¥æœŸåç§»
  var operatingCarrierDesignator = convertToUpperCase(getQueryVariable("operatingCarrierDesignator")) || "CZ"; // æ‰¿è¿äººä»£ç 
  var flightNumber = getQueryVariable("flightNumber") || "1234"; // èˆªç­å·
  var flightDate = getQueryVariable("flightDate") || "2025.1.1"; // èˆªç­æ—¥æœŸ
  var compartmentCode = convertToUpperCase(getQueryVariable("compartmentCode")) || "Y"; // èˆ±ä½ä»£ç 
  var seatNumber = convertToUpperCase(getQueryVariable("seatNumber")) || "1A"; // åº§ä½å·
  var checkInSequenceNumber = getQueryVariable("checkInSequenceNumber") || "025"; // å€¼æœºåºå·

  // ç”Ÿæˆç½‘é¡µå†…å®¹
  document.getElementById("passengerName").textContent = passengerName;
  document.getElementById("passengerMember").textContent = passengerMember;
  document.getElementById("passengerMemberID").textContent = passengerMemberID;
  document.getElementById("ticketNumber").textContent = ticketNumber;
  document.getElementById("boardingTime").textContent = boardingTime;
  document.getElementById("gate").textContent = gate;
  document.getElementById("departureAirport").textContent = departureAirport;
  document.getElementById("departureTime").textContent = departureTime;
  document.getElementById("departureAirportName").textContent = departureAirportName;
  document.getElementById("arrivalAirport").textContent = arrivalAirport;
  document.getElementById("arrivalAirportName").textContent = arrivalAirportName;
  document.getElementById("arrivalTime").innerHTML = arrivalDayOffset ? arrivalTime + "<sup>" + arrivalDayOffset + "</sup>" : arrivalTime;
  document.getElementById("flightDate").textContent = flightDate;
  document.getElementById("flightNumber").textContent = operatingCarrierDesignator + flightNumber;
  document.getElementById("compartmentCode").textContent = compartmentCode;
  document.getElementById("seatNumber").textContent = seatNumber;
  document.getElementById("checkInSequenceNumber").textContent = checkInSequenceNumber;

  document.getElementById("airlineLogo").src = "img/" + operatingCarrierDesignator.toLowerCase() + ".svg";

  // ç”ŸæˆBCBPæ•°æ®
  var bcbp = bcbp.encode({
    data: {
      legs: [
        {
          operatingCarrierPNR: operatingCarrierPNR,
          departureAirport: departureAirport,
          arrivalAirport: arrivalAirport,
          operatingCarrierDesignator: operatingCarrierDesignator,
          flightNumber: flightNumber,
          flightDate: flightDate,
          compartmentCode: compartmentCode,
          seatNumber: seatNumber,
          checkInSequenceNumber: checkInSequenceNumber,
          passengerStatus: "1",
        },
      ],
      passengerName: passengerName,
    },
  });
  console.log(bcbp);

  // ç”ŸæˆäºŒç»´ç 
  var qrcode = new QRCode(document.getElementById("qrcode"), {
    text: bcbp,
    width: 128,
    height: 128,
    correctLevel: QRCode.CorrectLevel.L
  });    
</script>

</html>